# xmonad-build

# xmonad-build

This repository provides a streamlined and automated way to set up and build the `xmonad` tiling window manager. It includes a custom script (`build-xmonad.sh`) to simplify the process of cloning, building, and installing `xmonad` and its companion library `xmonad-contrib`

Whether you're a new user or an experienced Haskell developer, this setup ensures a clean, reproducible, and portable environment for running and customizing `xmonad`

---

### Features
- **Automated Setup**: The `build-xmonad.sh` script handles cloning repositories, building binaries, and installing dependencies.
- **Customizable Configuration**: Easily create and recompile your `xmonad.hs` configuration file.
- **Lightweight and Portable**: Designed to minimize clutter and allow easy replication on other systems.
- **Version Control Friendly**: Keeps `.git` directories intact for seamless updates.

Follow the steps below to get started with `xmonad`!


### Install dependencies

```
$ yay -S \
> xorg-server xorg-apps xorg-xinit xorg-xmessage \
> libx11 libxft libxinerama libxrandr libxss \
> pkgconf
```

Install Haskell via [ghcup](https://www.haskell.org/ghcup/#)

simple, interactive, text-based user interface (TUI), run:
```
ghcup tui
```

### Config cabal
Create cabal.project file
```
cat > cabal.project <<EOF
packages: ./xmonad ./xmonad-contrib
EOF
```

### Build
```
$ ./build-xmonad.hs
```
**Role of build-xmonad.sh**
The build-xmonad.sh script automates the process of setting up and building xmonad

1. **Clone or Update Repositories**:
   - Clones the xmonad and xmonad-contrib repositories from GitHub if they don't already exist.
   - Updates the repositories if they are already cloned.

2. **Build and Install**:
   - Runs `cabal update` to fetch the latest package information.
   - Installs the xmonad and xmonad-contrib libraries for recompiling the `xmonad.hs` configuration.
   - Installs the xmonad binary to a user-specific directory (`$HOME/.local/bin`).

3. **Ensure PATH Configuration**:
   - Checks if the installation directory (`$HOME/.local/bin`) is in the `PATH`.
   - Provides instructions to add it to the `PATH` if necessary.

### Config xmonad
Create a file called xmonad.hs with the following content:
```haskell
import XMonad

myModMask       = mod4Mask -- Rebind Mod to the Super key
myTerminal      = "kitty"


main :: IO ()
main = xmonad $ def
    { modMask    = myModMask,
      terminal   = myTerminal
    }
```
Save to ```~/.config/xmonad/```


### Run

To start `xmonad` using `startx`, create a `.xinitrc` file in your home directory with the following content:

```bash
#!/bin/bash
exec xmonad
```

Now you can run `startx` to launch `xmonad`.

---

### Recompilation
Whenever you update `xmonad.hs`, recompile it with:

```bash
xmonad --recompile
```

Run it whenever you need a fresh build:

```bash
~/xmonad-build/build-xmonad.sh
```


### Benefits of This Approach
1. **Clean and Lightweight**: The build directory is recreated fresh each time, avoiding clutter.
2. **Version Control Flexibility**: Keeping .git directories allows you to pull updates without recloning.
3. **Automation**: The script handles everything, reducing manual steps.
4. **Portable**: The setup can be easily replicated on other systems.


## Lessons Learned
**GHC environment file** (`.ghc.environment.x86_64-linux-9.4.8`). This file is automatically generated by `cabal` when you use the `--package-env` option, and it defines the package environment for GHC (the Haskell compiler)

**What Is the Default Configuration?**
The default configuration provided by xmonad includes:
- **Mod Key**: The `Alt` key (`mod1Mask`) is used as the modifier key.
- **Terminal**: Defaults to `xterm`.
- **Key Bindings**:
  - `Mod + Shift + Enter`: Launches the terminal.
  - `Mod + Shift + C`: Closes the focused window.
  - `Mod + Space`: Switches between layouts.
  - `Mod + Tab`: Cycles through windows.
  - `Mod + Q`: Restarts xmonad.
- **Layout**: A simple tiling layout with no additional customizations.



The README.md outlines the steps to set up and build xmonad, a tiling window manager, using a custom script (`build-xmonad.sh`). Here's a summary of the process and the role of build-xmonad.sh:

---

### **Summary of the README**
1. **Install Dependencies**:
   - Installs required system packages for xmonad (e.g., `xorg-server`, `libx11`, etc.) using `yay` (an Arch Linux AUR helper).
   - Installs Haskell via `ghcup`, a tool for managing Haskell installations.

2. **Configure Cabal**:
   - Creates a cabal.project file to specify the xmonad and xmonad-contrib packages for building.

3. **Build Process**:
   - Runs the build-xmonad.sh script to automate the cloning, building, and installation of xmonad and xmonad-contrib.

4. **Configure xmonad**:
   - Provides a sample `xmonad.hs` configuration file to customize key bindings, terminal, and layout.
   - Saves the configuration to `~/.config/xmonad/xmonad.hs`.

5. **Run xmonad**:
   - Sets up a `.xinitrc` file to launch xmonad with `startx`.

6. **Recompilation**:
   - Explains how to recompile xmonad after updating the `xmonad.hs` configuration using `xmonad --recompile`.

---

### **Role of build-xmonad.sh**
The build-xmonad.sh script automates the process of setting up and building xmonad. Here's a summarized explanation of its functionality:

1. **Clone or Update Repositories**:
   - Clones the xmonad and xmonad-contrib repositories from GitHub if they don't already exist.
   - Updates the repositories if they are already cloned.

2. **Build and Install**:
   - Runs `cabal update` to fetch the latest package information.
   - Installs the xmonad and xmonad-contrib libraries for recompiling the `xmonad.hs` configuration.
   - Installs the xmonad binary to a user-specific directory (`$HOME/.local/bin`).

3. **Ensure PATH Configuration**:
   - Checks if the installation directory (`$HOME/.local/bin`) is in the `PATH`.
   - Provides instructions to add it to the `PATH` if necessary.

---

### **How It Fits Together**
- The README.md provides the manual steps for setting up xmonad, while build-xmonad.sh automates the most critical parts of the process (cloning, building, installing, and recompiling).
- Together, they ensure a clean, reproducible, and user-friendly setup for xmonad.

Let me know if you'd like further clarification or improvements to the script!
